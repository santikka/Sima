<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sick-sicker model • Sima</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Sick-sicker model">
<meta property="og:description" content="In this example we re-implement the sick-sicker model that appears in Krijkamp EM, Alarid-Escudero F, Enns EA, Jalal HJ, Hunink MGM, Pechlivanoglou P.  Microsimulation modeling for health decision sciences using R:  A tutorial. Med Decis Making. 2018;38(3):400–22.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Sima</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/Sima.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/DiabetesAndStroke.html">Diabetes and stroke example</a>
    </li>
    <li>
      <a href="../articles/SickSickerModel.html">Sick-sicker model</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/santikk/Sima/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="SickSickerModel_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Sick-sicker model</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/santikk/Sima/blob/master/vignettes/SickSickerModel.Rmd"><code>vignettes/SickSickerModel.Rmd</code></a></small>
      <div class="hidden name"><code>SickSickerModel.Rmd</code></div>

    </div>

    
    
<p>In this example we consider a simple scenario where a person can occupy one of four states: healthy, sick, sicker and dead. At each iteration, we compute the transition probabilities in the population and change the state accordingly. In addition, there are costs and quality adjusted life years associated with each state.</p>
<p>For more information and details about the model, please refer to the original article: Krijkamp EM, Alarid-Escudero F, Enns EA, Jalal HJ, Hunink MGM, Pechlivanoglou P. Microsimulation modeling for health decision sciences using R: A tutorial. <em>Med Decis Making.</em> 2018;<strong>38(3)</strong>:400–22.</p>
<p>The code used for comparative performance purposes can be found on GitHub: <a href="https://github.com/DARTH-git/Microsimulation-tutorial" class="uri">https://github.com/DARTH-git/Microsimulation-tutorial</a></p>
<div id="r-code" class="section level2">
<h2 class="hasAnchor">
<a href="#r-code" class="anchor"></a>R-code</h2>
<p>Here we provide the R-code for implementing the model in the Sima framework. We also see that the performance of Sima in this example is superior.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">##</span>
<span class="co">## Implementation of the Sick-Sicker model that appears in:</span>
<span class="co">##</span>
<span class="co">## Krijkamp EM, Alarid-Escudero F, Enns EA, Jalal HJ, Hunink MGM, Pechlivanoglou P. </span>
<span class="co">##   Microsimulation modeling for health decision sciences using R: </span>
<span class="co">##   A tutorial. Med Decis Making. 2018;38(3):400–22.</span>
<span class="co">##</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://santikk.github.io/Sima">Sima</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://daqana.github.io/dqrng/">dqrng</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Vectorized multinomial distribution</span>
<span class="va">rmult</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">prob</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">dims</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">prob</span><span class="op">)</span>
    <span class="va">k</span> <span class="op">&lt;-</span> <span class="va">dims</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
    <span class="va">n</span> <span class="op">&lt;-</span> <span class="va">dims</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>
    <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="va">k</span><span class="op">)</span> <span class="op">{</span>
        <span class="va">prob</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="va">prob</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span> <span class="op">+</span> <span class="va">prob</span><span class="op">[</span><span class="va">i</span><span class="op">-</span><span class="fl">1</span>,<span class="op">]</span>
    <span class="op">}</span>
    <span class="va">u</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu">dqrng</span><span class="fu">::</span><span class="fu"><a href="https://daqana.github.io/dqrng/reference/dqrng-functions.html">dqrunif</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">k</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">colSums</a></span><span class="op">(</span><span class="va">u</span> <span class="op">&gt;</span> <span class="va">prob</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Initialize the population for the simulation</span>
<span class="co"># -- state : The possible states for an individual (healthy, sick, sicker, dead)</span>
<span class="co"># -- cost  : The initial cost associated with each individual</span>
<span class="co"># -- treatment : Treatment status, 0 = not treated, 1 = treated</span>
<span class="co"># -- QALY : Initial quality adjusted life years</span>
<span class="va">initializer</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span><span class="op">(</span>
        state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="va">n</span><span class="op">)</span>,
        cost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">2000.0</span>, <span class="va">n</span><span class="op">)</span>,
        treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0L</span>, <span class="va">n</span><span class="op">)</span>,
        QALY <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">n</span><span class="op">)</span>
    <span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">health_status</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ManipulationEvent.html">ManipulationEvent</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
    name <span class="op">=</span> <span class="st">"Health Status"</span>,
    description <span class="op">=</span> <span class="st">"Transitions between states (healthy, sick, sicker, dead)"</span>,
    parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        hd   <span class="op">=</span> <span class="fl">0.005</span>, 
        hs1  <span class="op">=</span> <span class="fl">0.15</span>, 
        s1h  <span class="op">=</span> <span class="fl">0.5</span>,
        s1s2 <span class="op">=</span> <span class="fl">0.105</span>,
        s1d  <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>  <span class="op">*</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fl">0.005</span><span class="op">)</span><span class="op">)</span>,
        s2d  <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span> <span class="op">*</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fl">0.005</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>,
    derived <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        H  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">hd</span> <span class="op">-</span> <span class="va">hs1</span>, <span class="va">s1h</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,
        S1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">hs1</span>, <span class="fl">1</span> <span class="op">-</span> <span class="va">s1h</span> <span class="op">-</span> <span class="va">s1s2</span> <span class="op">-</span> <span class="va">s1d</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,
        S2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">s1s2</span>, <span class="fl">1</span> <span class="op">-</span> <span class="va">s2d</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,
        D  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">hd</span>, <span class="va">s1d</span>, <span class="va">s2d</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>,
    allocated <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span>, <span class="va">status</span><span class="op">[</span> , <span class="va">.N</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>,
    mechanism <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="op">{</span>
        <span class="va">state</span> <span class="op">&lt;-</span> <span class="va">status</span><span class="op">$</span><span class="va">state</span>
        <span class="va">prob</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="va">H</span><span class="op">[</span><span class="va">state</span><span class="op">]</span>
        <span class="va">prob</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="va">S1</span><span class="op">[</span><span class="va">state</span><span class="op">]</span>
        <span class="va">prob</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="va">S2</span><span class="op">[</span><span class="va">state</span><span class="op">]</span>
        <span class="va">status</span><span class="op">[</span> , <span class="va">state</span> <span class="op">:=</span> <span class="fu">rmult</span><span class="op">(</span><span class="va">prob</span><span class="op">)</span><span class="op">]</span>
    <span class="op">}</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">costs</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ManipulationEvent.html">ManipulationEvent</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
    name <span class="op">=</span> <span class="st">"Costs"</span>,
    description <span class="op">=</span> <span class="st">"Individual costs based on health and treatment"</span>,
    parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        state_cost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2000.0</span>, <span class="fl">4000.0</span>, <span class="fl">15000.0</span>, <span class="fl">0.0</span><span class="op">)</span>,
        treat_cost <span class="op">=</span> <span class="fl">12000.0</span>
    <span class="op">)</span>,
    mechanism <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="op">{</span>
        <span class="va">status</span><span class="op">[</span> , <span class="va">cost</span> <span class="op">:=</span> <span class="va">state_cost</span><span class="op">[</span><span class="va">state</span><span class="op">]</span> <span class="op">+</span> <span class="op">(</span><span class="va">state</span> <span class="op">==</span> <span class="fl">2L</span><span class="op">)</span> <span class="op">*</span> <span class="va">treatment</span> <span class="op">*</span> <span class="va">treat_cost</span><span class="op">]</span>
    <span class="op">}</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">quality</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ManipulationEvent.html">ManipulationEvent</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
    name <span class="op">=</span> <span class="st">"QALY"</span>,
    description <span class="op">=</span> <span class="st">"Quality-adjusted life years"</span>,
    parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        state_qaly <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.0</span>, <span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">0.0</span><span class="op">)</span>,
        S1_qaly <span class="op">=</span> <span class="fl">0.75</span>,
        treat_qaly <span class="op">=</span> <span class="fl">0.95</span>
    <span class="op">)</span>,
    mechanism <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="op">{</span>
        <span class="va">status</span><span class="op">[</span> , <span class="va">QALY</span> <span class="op">:=</span> <span class="va">state_qaly</span><span class="op">[</span><span class="va">state</span><span class="op">]</span> <span class="op">+</span> <span class="op">(</span><span class="va">state</span> <span class="op">==</span> <span class="fl">2L</span><span class="op">)</span> <span class="op">*</span> 
                  <span class="op">(</span><span class="va">treatment</span> <span class="op">*</span> <span class="va">treat_qaly</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">treatment</span><span class="op">)</span> <span class="op">*</span> <span class="va">S1_qaly</span><span class="op">)</span><span class="op">]</span>
    <span class="op">}</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">treatment_intervention</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ManipulationEvent.html">ManipulationEvent</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
    name <span class="op">=</span> <span class="st">"Treatment intervention"</span>,
    description <span class="op">=</span> <span class="st">"Assign treatment for everyone"</span>,
    mechanism <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span><span class="op">(</span><span class="op">{</span>
        <span class="va">status</span><span class="op">[</span> , <span class="va">treatment</span> <span class="op">:=</span> <span class="fl">1L</span><span class="op">]</span>
    <span class="op">}</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">sim</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Simulator.html">Simulator</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
    initializer <span class="op">=</span> <span class="va">initializer</span>,
    man_events <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">health_status</span>, <span class="va">costs</span>, <span class="va">quality</span><span class="op">)</span>,
    seeds <span class="op">=</span> <span class="fl">0</span>,
    keep_init <span class="op">=</span> <span class="cn">TRUE</span>,
    n <span class="op">=</span> <span class="fl">1e5</span>
<span class="op">)</span>

<span class="co"># A monitor to save the entire history</span>
<span class="va">sim</span><span class="op">$</span><span class="fu">initialize_monitor</span><span class="op">(</span>
    aggregators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">dt</span><span class="op">)</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">dt</span><span class="op">)</span><span class="op">)</span>,
    intervals <span class="op">=</span> <span class="fl">1</span>
<span class="op">)</span>

<span class="co"># Run, reset, intervene, run again</span>
<span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">sim</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="fl">30</span>, show_progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
    <span class="va">sim</span><span class="op">$</span><span class="fu">reset</span><span class="op">(</span><span class="op">)</span>
    <span class="va">sim</span><span class="op">$</span><span class="fu">intervene</span><span class="op">(</span>man_events <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">treatment_intervention</span><span class="op">)</span><span class="op">)</span>
    <span class="va">sim</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="fl">30</span>, show_progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="co"># user  system elapsed </span>
<span class="co"># 1.49    0.14    1.64 </span>

<span class="co"># Comparison with the microsimulation R package</span>
<span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span><span class="op">{</span>
  <span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/source_url.html">source_url</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/DARTH-git/
                       Microsimulation-tutorial/master/Appendix%20D_online_supp.R"</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="co"># Measured time</span>
<span class="va">comp.time</span>
<span class="co"># Time difference of 5.889181 secs</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Santtu Tikka, Jussi Hakanen, Mirka Saarela, Juha Karvanen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
